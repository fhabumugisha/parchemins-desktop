TASK 04 - SEARCH AND DOCUMENTS UI

You are continuing development of "Assistant Pastoral", an Electron desktop application. This task focuses on implementing the search functionality and document management UI.

PREREQUISITES

Tasks 01, 02, and 03 must be completed. You should have:
- Basic project structure with Electron, React, TypeScript
- Text extractors working
- Database with FTS5 search
- IPC handlers for documents and search

OVERVIEW

Implement:
1. Zustand stores for documents and UI state
2. Sidebar with document list
3. Document viewer component
4. Search functionality with results display
5. Main layout with responsive panels

DEPENDENCIES

- zustand: 5.0.10 (already installed)
- lucide-react: 0.562.0 (already installed)
- React 19.2.3

ZUSTAND STORES

Create src/renderer/stores/documents.store.ts:

import { create } from "zustand";
import type { Document } from "../../shared/types";

interface DocumentsState {
  documents: Document[];
  selectedDocument: Document | null;
  isLoading: boolean;
  error: string | null;
  searchQuery: string;
  searchResults: Document[];
  isSearching: boolean;
  
  // Actions
  fetchDocuments: () => Promise<void>;
  selectDocument: (doc: Document | null) => void;
  deleteDocument: (id: number) => Promise<void>;
  openDocumentExternal: (id: number) => Promise<void>;
  search: (query: string) => Promise<void>;
  clearSearch: () => void;
}

export const useDocumentsStore = create<DocumentsState>((set, get) => ({
  documents: [],
  selectedDocument: null,
  isLoading: false,
  error: null,
  searchQuery: "",
  searchResults: [],
  isSearching: false,
  
  fetchDocuments: async () => {
    set({ isLoading: true, error: null });
    try {
      const documents = await window.electronAPI.documents.getAll();
      set({ documents, isLoading: false });
    } catch (error) {
      set({ error: (error as Error).message, isLoading: false });
    }
  },
  
  selectDocument: (doc) => {
    set({ selectedDocument: doc });
  },
  
  deleteDocument: async (id) => {
    try {
      await window.electronAPI.documents.delete(id);
      set(state => ({
        documents: state.documents.filter(d => d.id !== id),
        selectedDocument: state.selectedDocument?.id === id ? null : state.selectedDocument,
        searchResults: state.searchResults.filter(d => d.id !== id)
      }));
    } catch (error) {
      set({ error: (error as Error).message });
    }
  },
  
  openDocumentExternal: async (id) => {
    try {
      await window.electronAPI.documents.openExternal(id);
    } catch (error) {
      set({ error: (error as Error).message });
    }
  },
  
  search: async (query) => {
    set({ searchQuery: query, isSearching: true });
    
    if (!query.trim()) {
      set({ searchResults: [], isSearching: false });
      return;
    }
    
    try {
      const results = await window.electronAPI.search.query(query);
      set({ searchResults: results, isSearching: false });
    } catch (error) {
      set({ error: (error as Error).message, isSearching: false });
    }
  },
  
  clearSearch: () => {
    set({ searchQuery: "", searchResults: [] });
  }
}));

Create src/renderer/stores/ui.store.ts:

import { create } from "zustand";
import { persist } from "zustand/middleware";

type View = "chat" | "document" | "settings";
type FontSize = "small" | "medium" | "large";

interface UIState {
  sidebarCollapsed: boolean;
  activeView: View;
  fontSize: FontSize;
  
  // Actions
  toggleSidebar: () => void;
  setActiveView: (view: View) => void;
  setFontSize: (size: FontSize) => void;
}

export const useUIStore = create<UIState>()(
  persist(
    (set) => ({
      sidebarCollapsed: false,
      activeView: "chat",
      fontSize: "medium",
      
      toggleSidebar: () => set(state => ({ 
        sidebarCollapsed: !state.sidebarCollapsed 
      })),
      
      setActiveView: (view) => set({ activeView: view }),
      
      setFontSize: (fontSize) => set({ fontSize })
    }),
    {
      name: "assistant-pastoral-ui",
      partialize: (state) => ({
        sidebarCollapsed: state.sidebarCollapsed,
        fontSize: state.fontSize
      })
    }
  )
);

Create src/renderer/stores/indexer.store.ts:

import { create } from "zustand";
import type { IndexingProgress } from "../../shared/types";

interface IndexerState {
  folderPath: string | null;
  isIndexing: boolean;
  progress: IndexingProgress | null;
  lastResult: { added: number; updated: number; removed: number; errors: string[] } | null;
  
  // Actions
  selectFolder: () => Promise<string | null>;
  indexFolder: (path: string) => Promise<void>;
  setFolderPath: (path: string) => void;
}

export const useIndexerStore = create<IndexerState>((set, get) => ({
  folderPath: null,
  isIndexing: false,
  progress: null,
  lastResult: null,
  
  selectFolder: async () => {
    const path = await window.electronAPI.indexer.selectFolder();
    if (path) {
      set({ folderPath: path });
    }
    return path;
  },
  
  indexFolder: async (path) => {
    set({ isIndexing: true, progress: null, lastResult: null });
    
    // Set up progress listener
    const unsubscribe = window.electronAPI.indexer.onProgress((progress) => {
      set({ progress });
    });
    
    try {
      const result = await window.electronAPI.indexer.indexFolder(path);
      set({ lastResult: result, isIndexing: false, progress: null });
    } catch (error) {
      set({ isIndexing: false, progress: null });
      throw error;
    } finally {
      unsubscribe();
    }
  },
  
  setFolderPath: (path) => set({ folderPath: path })
}));

LAYOUT COMPONENTS

Create src/renderer/components/layout/MainLayout.tsx:

import React from "react";
import { Sidebar } from "./Sidebar";
import { Header } from "./Header";
import { MainContent } from "./MainContent";
import { useUIStore } from "../../stores/ui.store";
import { cn } from "../../lib/cn";

export function MainLayout() {
  const { sidebarCollapsed } = useUIStore();
  
  return (
    <div className="h-screen flex flex-col bg-cream">
      <Header />
      <div className="flex-1 flex overflow-hidden">
        <Sidebar />
        <main className={cn(
          "flex-1 transition-all duration-300",
          sidebarCollapsed ? "ml-16" : "ml-72"
        )}>
          <MainContent />
        </main>
      </div>
    </div>
  );
}

Create src/renderer/components/layout/Header.tsx:

import React from "react";
import { Settings, Menu, CreditCard } from "lucide-react";
import { useUIStore } from "../../stores/ui.store";
import { useCreditsStore } from "../../stores/credits.store";

export function Header() {
  const { toggleSidebar, setActiveView } = useUIStore();
  const { credits } = useCreditsStore();
  
  return (
    <header className="h-14 bg-white border-b border-gray-200 flex items-center justify-between px-4 drag-region">
      <div className="flex items-center gap-4">
        <button
          onClick={toggleSidebar}
          className="p-2 hover:bg-gray-100 rounded-lg transition-colors no-drag"
        >
          <Menu className="w-5 h-5 text-muted" />
        </button>
        <h1 className="text-lg font-serif text-burgundy font-semibold">
          Assistant Pastoral
        </h1>
      </div>
      
      <div className="flex items-center gap-4 no-drag">
        <div className="flex items-center gap-2 text-sm text-muted">
          <CreditCard className="w-4 h-4" />
          <span>{credits} credits</span>
        </div>
        <button
          onClick={() => setActiveView("settings")}
          className="p-2 hover:bg-gray-100 rounded-lg transition-colors"
        >
          <Settings className="w-5 h-5 text-muted" />
        </button>
      </div>
    </header>
  );
}

Create src/renderer/components/layout/Sidebar.tsx:

import React, { useEffect } from "react";
import { FileText, MessageSquare, Search, FolderOpen, ChevronLeft, ChevronRight } from "lucide-react";
import { useUIStore } from "../../stores/ui.store";
import { useDocumentsStore } from "../../stores/documents.store";
import { useIndexerStore } from "../../stores/indexer.store";
import { DocumentList } from "../documents/DocumentList";
import { SearchInput } from "../common/SearchInput";
import { cn } from "../../lib/cn";

export function Sidebar() {
  const { sidebarCollapsed, toggleSidebar, setActiveView } = useUIStore();
  const { documents, fetchDocuments, search, searchQuery, clearSearch } = useDocumentsStore();
  const { folderPath, selectFolder, indexFolder, isIndexing } = useIndexerStore();
  
  useEffect(() => {
    fetchDocuments();
  }, []);
  
  const handleSelectFolder = async () => {
    const path = await selectFolder();
    if (path) {
      await indexFolder(path);
      await fetchDocuments();
    }
  };
  
  if (sidebarCollapsed) {
    return (
      <aside className="fixed left-0 top-14 bottom-0 w-16 bg-white border-r border-gray-200 flex flex-col items-center py-4 gap-4">
        <button
          onClick={() => setActiveView("chat")}
          className="p-3 hover:bg-gray-100 rounded-lg transition-colors"
          title="Chat"
        >
          <MessageSquare className="w-5 h-5 text-muted" />
        </button>
        <button
          onClick={() => setActiveView("document")}
          className="p-3 hover:bg-gray-100 rounded-lg transition-colors"
          title="Documents"
        >
          <FileText className="w-5 h-5 text-muted" />
        </button>
        <button
          onClick={toggleSidebar}
          className="mt-auto p-3 hover:bg-gray-100 rounded-lg transition-colors"
        >
          <ChevronRight className="w-5 h-5 text-muted" />
        </button>
      </aside>
    );
  }
  
  return (
    <aside className="fixed left-0 top-14 bottom-0 w-72 bg-white border-r border-gray-200 flex flex-col">
      {/* Search */}
      <div className="p-4 border-b border-gray-100">
        <SearchInput
          value={searchQuery}
          onChange={search}
          onClear={clearSearch}
          placeholder="Rechercher dans les sermons..."
        />
      </div>
      
      {/* Document count or folder selection */}
      <div className="px-4 py-3 border-b border-gray-100">
        {documents.length > 0 ? (
          <div className="flex items-center justify-between">
            <span className="text-sm text-muted">
              {documents.length} sermon{documents.length > 1 ? "s" : ""}
            </span>
            <button
              onClick={handleSelectFolder}
              disabled={isIndexing}
              className="text-sm text-burgundy hover:underline disabled:opacity-50"
            >
              {isIndexing ? "Indexation..." : "Changer de dossier"}
            </button>
          </div>
        ) : (
          <button
            onClick={handleSelectFolder}
            disabled={isIndexing}
            className="w-full flex items-center justify-center gap-2 py-3 bg-burgundy text-white rounded-lg hover:bg-burgundy/90 transition-colors disabled:opacity-50"
          >
            <FolderOpen className="w-4 h-4" />
            <span>{isIndexing ? "Indexation..." : "Selectionner un dossier"}</span>
          </button>
        )}
      </div>
      
      {/* Document list */}
      <div className="flex-1 overflow-y-auto">
        <DocumentList />
      </div>
      
      {/* Collapse button */}
      <div className="p-2 border-t border-gray-100">
        <button
          onClick={toggleSidebar}
          className="w-full flex items-center justify-center gap-2 py-2 text-sm text-muted hover:bg-gray-100 rounded-lg transition-colors"
        >
          <ChevronLeft className="w-4 h-4" />
          <span>Reduire</span>
        </button>
      </div>
    </aside>
  );
}

Create src/renderer/components/layout/MainContent.tsx:

import React from "react";
import { useUIStore } from "../../stores/ui.store";
import { DocumentViewer } from "../documents/DocumentViewer";
// ChatPanel will be implemented in task 05
// SettingsPanel will be implemented in task 06

export function MainContent() {
  const { activeView } = useUIStore();
  const { selectedDocument } = useDocumentsStore();
  
  // If a document is selected, show it regardless of activeView
  if (selectedDocument && activeView === "document") {
    return <DocumentViewer />;
  }
  
  switch (activeView) {
    case "chat":
      return (
        <div className="h-full flex items-center justify-center text-muted">
          <p>Chat sera implemente dans la tache 05</p>
        </div>
      );
    case "settings":
      return (
        <div className="h-full flex items-center justify-center text-muted">
          <p>Parametres seront implementes dans la tache 06</p>
        </div>
      );
    case "document":
    default:
      return (
        <div className="h-full flex items-center justify-center text-muted">
          <p>Selectionnez un document dans la liste</p>
        </div>
      );
  }
}

DOCUMENT COMPONENTS

Create src/renderer/components/documents/DocumentList.tsx:

import React from "react";
import { useDocumentsStore } from "../../stores/documents.store";
import { DocumentItem } from "./DocumentItem";

export function DocumentList() {
  const { documents, searchResults, searchQuery, isLoading } = useDocumentsStore();
  
  const displayedDocs = searchQuery ? searchResults : documents;
  
  if (isLoading) {
    return (
      <div className="p-4 text-center text-muted">
        Chargement...
      </div>
    );
  }
  
  if (displayedDocs.length === 0) {
    return (
      <div className="p-4 text-center text-muted text-sm">
        {searchQuery ? "Aucun resultat" : "Aucun document indexe"}
      </div>
    );
  }
  
  return (
    <div className="divide-y divide-gray-100">
      {displayedDocs.map(doc => (
        <DocumentItem key={doc.id} document={doc} />
      ))}
    </div>
  );
}

Create src/renderer/components/documents/DocumentItem.tsx:

import React from "react";
import { FileText, Calendar, BookOpen, Trash2, ExternalLink } from "lucide-react";
import type { Document } from "../../../shared/types";
import { useDocumentsStore } from "../../stores/documents.store";
import { useUIStore } from "../../stores/ui.store";
import { cn } from "../../lib/cn";

interface DocumentItemProps {
  document: Document;
}

export function DocumentItem({ document }: DocumentItemProps) {
  const { selectedDocument, selectDocument, deleteDocument, openDocumentExternal } = useDocumentsStore();
  const { setActiveView } = useUIStore();
  
  const isSelected = selectedDocument?.id === document.id;
  
  const handleClick = () => {
    selectDocument(document);
    setActiveView("document");
  };
  
  const handleDelete = async (e: React.MouseEvent) => {
    e.stopPropagation();
    if (confirm(`Supprimer "${document.title}" de l'index ?`)) {
      await deleteDocument(document.id);
    }
  };
  
  const handleOpenExternal = async (e: React.MouseEvent) => {
    e.stopPropagation();
    await openDocumentExternal(document.id);
  };
  
  // Format date for display
  const formatDate = (dateStr: string | null) => {
    if (!dateStr) return null;
    try {
      const date = new Date(dateStr);
      return date.toLocaleDateString("fr-FR", {
        day: "numeric",
        month: "short",
        year: "numeric"
      });
    } catch {
      return dateStr;
    }
  };
  
  return (
    <div
      onClick={handleClick}
      className={cn(
        "p-3 cursor-pointer hover:bg-gray-50 transition-colors group",
        isSelected && "bg-burgundy/5 border-l-2 border-burgundy"
      )}
    >
      <div className="flex items-start gap-3">
        <FileText className={cn(
          "w-4 h-4 mt-0.5 flex-shrink-0",
          isSelected ? "text-burgundy" : "text-muted"
        )} />
        
        <div className="flex-1 min-w-0">
          <h3 className={cn(
            "font-medium text-sm truncate",
            isSelected ? "text-burgundy" : "text-gray-900"
          )}>
            {document.title}
          </h3>
          
          <div className="flex items-center gap-3 mt-1 text-xs text-muted">
            {document.date && (
              <span className="flex items-center gap-1">
                <Calendar className="w-3 h-3" />
                {formatDate(document.date)}
              </span>
            )}
            {document.bible_ref && (
              <span className="flex items-center gap-1">
                <BookOpen className="w-3 h-3" />
                {document.bible_ref}
              </span>
            )}
          </div>
          
          {/* Show snippet if available (from search) */}
          {(document as any).snippet && (
            <p
              className="mt-1 text-xs text-muted line-clamp-2"
              dangerouslySetInnerHTML={{ __html: (document as any).snippet }}
            />
          )}
        </div>
        
        {/* Action buttons */}
        <div className="flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity">
          <button
            onClick={handleOpenExternal}
            className="p-1 hover:bg-gray-200 rounded"
            title="Ouvrir dans l'application"
          >
            <ExternalLink className="w-3.5 h-3.5 text-muted" />
          </button>
          <button
            onClick={handleDelete}
            className="p-1 hover:bg-red-100 rounded"
            title="Supprimer de l'index"
          >
            <Trash2 className="w-3.5 h-3.5 text-red-500" />
          </button>
        </div>
      </div>
    </div>
  );
}

Create src/renderer/components/documents/DocumentViewer.tsx:

import React from "react";
import { ArrowLeft, ExternalLink, Calendar, BookOpen, FileText, Hash } from "lucide-react";
import { useDocumentsStore } from "../../stores/documents.store";
import { useUIStore } from "../../stores/ui.store";

export function DocumentViewer() {
  const { selectedDocument, selectDocument, openDocumentExternal } = useDocumentsStore();
  const { setActiveView, fontSize } = useUIStore();
  
  if (!selectedDocument) {
    return (
      <div className="h-full flex items-center justify-center text-muted">
        Selectionnez un document
      </div>
    );
  }
  
  const handleBack = () => {
    selectDocument(null);
    setActiveView("chat");
  };
  
  const handleOpenExternal = () => {
    openDocumentExternal(selectedDocument.id);
  };
  
  // Format date
  const formatDate = (dateStr: string | null) => {
    if (!dateStr) return "Date inconnue";
    try {
      const date = new Date(dateStr);
      return date.toLocaleDateString("fr-FR", {
        weekday: "long",
        day: "numeric",
        month: "long",
        year: "numeric"
      });
    } catch {
      return dateStr;
    }
  };
  
  // Font size classes
  const fontSizeClasses = {
    small: "text-sm leading-relaxed",
    medium: "text-base leading-relaxed",
    large: "text-lg leading-loose"
  };
  
  return (
    <div className="h-full flex flex-col bg-cream-light">
      {/* Header */}
      <div className="bg-white border-b border-gray-200 px-6 py-4">
        <div className="flex items-center justify-between mb-4">
          <button
            onClick={handleBack}
            className="flex items-center gap-2 text-muted hover:text-burgundy transition-colors"
          >
            <ArrowLeft className="w-4 h-4" />
            <span>Retour</span>
          </button>
          
          <button
            onClick={handleOpenExternal}
            className="flex items-center gap-2 px-3 py-1.5 text-sm bg-burgundy text-white rounded-lg hover:bg-burgundy/90 transition-colors"
          >
            <ExternalLink className="w-4 h-4" />
            <span>Ouvrir le fichier</span>
          </button>
        </div>
        
        <h1 className="text-2xl font-serif text-burgundy mb-3">
          {selectedDocument.title}
        </h1>
        
        <div className="flex flex-wrap items-center gap-4 text-sm text-muted">
          {selectedDocument.date && (
            <span className="flex items-center gap-1.5">
              <Calendar className="w-4 h-4" />
              {formatDate(selectedDocument.date)}
            </span>
          )}
          {selectedDocument.bible_ref && (
            <span className="flex items-center gap-1.5">
              <BookOpen className="w-4 h-4" />
              {selectedDocument.bible_ref}
            </span>
          )}
          <span className="flex items-center gap-1.5">
            <Hash className="w-4 h-4" />
            {selectedDocument.word_count} mots
          </span>
        </div>
      </div>
      
      {/* Content */}
      <div className="flex-1 overflow-y-auto p-6">
        <div className={cn(
          "max-w-3xl mx-auto bg-white rounded-lg shadow-sm p-8",
          fontSizeClasses[fontSize]
        )}>
          <div className="prose prose-burgundy max-w-none whitespace-pre-wrap">
            {selectedDocument.content}
          </div>
        </div>
      </div>
    </div>
  );
}

COMMON COMPONENTS

Create src/renderer/components/common/SearchInput.tsx:

import React from "react";
import { Search, X } from "lucide-react";
import { cn } from "../../lib/cn";

interface SearchInputProps {
  value: string;
  onChange: (value: string) => void;
  onClear: () => void;
  placeholder?: string;
  className?: string;
}

export function SearchInput({ value, onChange, onClear, placeholder, className }: SearchInputProps) {
  return (
    <div className={cn("relative", className)}>
      <Search className="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted" />
      <input
        type="text"
        value={value}
        onChange={(e) => onChange(e.target.value)}
        placeholder={placeholder}
        className="w-full pl-9 pr-8 py-2 text-sm bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-burgundy/20 focus:border-burgundy transition-colors"
      />
      {value && (
        <button
          onClick={onClear}
          className="absolute right-2 top-1/2 -translate-y-1/2 p-1 hover:bg-gray-200 rounded"
        >
          <X className="w-3.5 h-3.5 text-muted" />
        </button>
      )}
    </div>
  );
}

Create src/renderer/components/common/Button.tsx:

import React from "react";
import { cn } from "../../lib/cn";

interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {
  variant?: "primary" | "secondary" | "ghost" | "danger";
  size?: "sm" | "md" | "lg";
  isLoading?: boolean;
}

export function Button({
  children,
  variant = "primary",
  size = "md",
  isLoading,
  disabled,
  className,
  ...props
}: ButtonProps) {
  const variants = {
    primary: "bg-burgundy text-white hover:bg-burgundy/90",
    secondary: "bg-gray-100 text-gray-900 hover:bg-gray-200",
    ghost: "bg-transparent text-gray-700 hover:bg-gray-100",
    danger: "bg-red-500 text-white hover:bg-red-600"
  };
  
  const sizes = {
    sm: "px-3 py-1.5 text-sm",
    md: "px-4 py-2",
    lg: "px-6 py-3 text-lg"
  };
  
  return (
    <button
      disabled={disabled || isLoading}
      className={cn(
        "inline-flex items-center justify-center gap-2 font-medium rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",
        variants[variant],
        sizes[size],
        className
      )}
      {...props}
    >
      {isLoading && (
        <svg className="animate-spin w-4 h-4" viewBox="0 0 24 24">
          <circle
            className="opacity-25"
            cx="12"
            cy="12"
            r="10"
            stroke="currentColor"
            strokeWidth="4"
            fill="none"
          />
          <path
            className="opacity-75"
            fill="currentColor"
            d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"
          />
        </svg>
      )}
      {children}
    </button>
  );
}

Create src/renderer/components/common/LoadingSpinner.tsx:

import React from "react";
import { Loader2 } from "lucide-react";
import { cn } from "../../lib/cn";

interface LoadingSpinnerProps {
  size?: "sm" | "md" | "lg";
  className?: string;
}

export function LoadingSpinner({ size = "md", className }: LoadingSpinnerProps) {
  const sizes = {
    sm: "w-4 h-4",
    md: "w-6 h-6",
    lg: "w-8 h-8"
  };
  
  return (
    <Loader2 className={cn("animate-spin text-burgundy", sizes[size], className)} />
  );
}

CREDITS STORE

Create src/renderer/stores/credits.store.ts:

import { create } from "zustand";

interface CreditsState {
  credits: number;
  isLoading: boolean;
  
  // Actions
  fetchCredits: () => Promise<void>;
  purchaseCredits: (amount: number) => Promise<void>;
}

export const useCreditsStore = create<CreditsState>((set) => ({
  credits: 0,
  isLoading: false,
  
  fetchCredits: async () => {
    set({ isLoading: true });
    try {
      const credits = await window.electronAPI.credits.get();
      set({ credits, isLoading: false });
    } catch (error) {
      set({ isLoading: false });
    }
  },
  
  purchaseCredits: async (amount) => {
    set({ isLoading: true });
    try {
      const newBalance = await window.electronAPI.credits.purchase(amount);
      set({ credits: newBalance, isLoading: false });
    } catch (error) {
      set({ isLoading: false });
    }
  }
}));

UPDATE APP COMPONENT

Update src/renderer/App.tsx:

import React, { useEffect } from "react";
import { MainLayout } from "./components/layout/MainLayout";
import { useCreditsStore } from "./stores/credits.store";

export default function App() {
  const { fetchCredits } = useCreditsStore();
  
  useEffect(() => {
    fetchCredits();
  }, []);
  
  return <MainLayout />;
}

ADD STYLES FOR DRAG REGION

Add to src/renderer/styles/globals.css:

/* Window drag region for custom title bar */
.drag-region {
  -webkit-app-region: drag;
}

.no-drag {
  -webkit-app-region: no-drag;
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: #d1d5db;
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: #9ca3af;
}

/* Line clamp utility */
.line-clamp-2 {
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* Prose styles for document content */
.prose-burgundy a {
  color: #722F37;
}

.prose-burgundy h1,
.prose-burgundy h2,
.prose-burgundy h3 {
  color: #722F37;
}

UPDATE CN UTILITY

Update src/renderer/lib/cn.ts:

type ClassValue = string | number | boolean | undefined | null | ClassValue[];

export function cn(...inputs: ClassValue[]): string {
  return inputs
    .flat()
    .filter(Boolean)
    .join(" ");
}

VERIFICATION

After implementation:
1. npm run dev shows the application with sidebar and main content area
2. Can select a folder and see documents listed in sidebar
3. Search input filters documents in real-time
4. Clicking a document shows it in the viewer
5. Can open document in external application
6. Can delete document from index
7. Sidebar collapses and expands correctly
8. Credits display in header
9. npm run typecheck passes
10. Responsive layout works at different sizes

DO NOT implement:
- Chat functionality (task 05)
- Settings panel (task 06)
- API key management (task 06)

Focus only on document listing, searching, and viewing.
